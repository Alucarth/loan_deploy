"use strict";(self["webpackChunkloan_system"]=self["webpackChunkloan_system"]||[]).push([[230],{4848:function(e,a,l){var t=l(9377);class r{getAll(){return t.Z.get("/city")}create(e){return t.Z.post("/city",e)}delete(e){return t.Z["delete"](`/city/${e}`)}}a.Z=new r},7252:function(e,a,l){var t=l(9377);class r{getAll(){return t.Z.get("/person_type")}create(e){return t.Z.post("/person_type",e)}delete(e){return t.Z["delete"](`/person_type/${e}`)}}a.Z=new r},230:function(e,a,l){l.r(a),l.d(a,{default:function(){return w}});var t=l(3396),r=l(4870),i=(l(7252),l(4848)),o=l(3435),n=l(2724),s=l(7046);const u={class:"flex justify-content-between"},c={class:"p-input-icon-left"},d=(0,t._)("i",{class:"bx bx-search-alt-2"},null,-1),m={class:"flex"},v={class:"field"},p=(0,t._)("label",{for:"firstname1"},"Nombre",-1),f={class:"field"},y=(0,t._)("label",{for:"firstname2"},"Abreviación",-1);var b={__name:"ListView",setup(e){const a=(0,s.N)(),l=(0,o.p)(),b=(0,r.iH)([]),h=(0,r.iH)(!1),w=(0,r.iH)({global:{value:null,matchMode:n.a6.CONTAINS},name:{operator:n.pg.AND,constraints:[{value:null,matchMode:n.a6.CONTAINS}]}}),g=(0,r.iH)({}),_=()=>{h.value=!0,g.value={}},C=e=>{h.value=!0,g.value=e},x=async()=>{try{let e=g.value;console.log("data",e);let a=await i.Z.create(e);201===a.status&&l.add({severity:"success",summary:"Registro Completado",detail:`Se registro "${a.data.name}"`,life:3e3}),404!==a.status&&500!==a.status||l.add({severity:"error",summary:"Error",detail:"Favor de contactarse con el soporte tecnico",life:3e3}),h.value=!1,k()}catch(e){l.add({severity:"error",summary:"Error",detail:"Error de conexion",life:3e3})}},W=e=>{g.value=e,a.require({message:"Esta de acuerdo con eliminar el registro?",header:"Confirmacion de Eliminacion",icon:"pi pi-info-circle",acceptClass:"p-button-danger",acceptLabel:"Si",accept:async()=>{try{let e=await i.Z["delete"](g.value.id);200===e.status&&(k(),l.add({severity:"info",summary:"Confirmacion",detail:"Se elimino el registro",life:3e3}))}catch(e){l.add({severity:"error",summary:"Error",detail:"no se pudo eliminar el registro ",life:3e3})}},reject:()=>{}})},k=async()=>{try{let e=await i.Z.getAll();200===e.status&&(b.value=e.data),404!==e.status&&500!==e.status||l.add({severity:"error",summary:"Error",detail:"Favor de contactarse con el soporte tecnico",life:3e3})}catch(e){l.add({severity:"error",summary:"Error",detail:"Error de conexion",life:3e3})}};return(0,t.bv)((()=>{k()})),(e,a)=>{const l=(0,t.up)("Button"),r=(0,t.up)("InputText"),i=(0,t.up)("Column"),o=(0,t.up)("DataTable"),n=(0,t.up)("Card"),s=(0,t.up)("Dialog");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(n,null,{title:(0,t.w5)((()=>[(0,t.Uk)(" Ciudades ")])),content:(0,t.w5)((()=>[(0,t.Wm)(o,{filters:w.value,"onUpdate:filters":a[1]||(a[1]=e=>w.value=e),value:b.value,paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50]},{header:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t.Wm)(l,{type:"button",label:"Nuevo",icon:"pi pi-plus",onClick:_}),(0,t._)("span",c,[d,(0,t.Wm)(r,{modelValue:w.value["global"].value,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value["global"].value=e),placeholder:"Buscar"},null,8,["modelValue"])])])])),default:(0,t.w5)((()=>[(0,t.Wm)(i,{field:"name",header:"Nombre"}),(0,t.Wm)(i,{field:"short_name",header:"Abreviación"}),(0,t.Wm)(i,{field:"actions",header:""},{body:(0,t.w5)((e=>[(0,t._)("div",m,[(0,t.Wm)(l,{icon:"bx bxs-pencil",style:{"font-size":"1.2rem"},severity:"info",text:"",rounded:"","aria-label":"User",onClick:a=>C(e.data)},null,8,["onClick"]),(0,t.Wm)(l,{icon:"bx bxs-trash-alt",style:{"font-size":"1.2rem"},severity:"danger",text:"",rounded:"","aria-label":"Cancel",onClick:a=>W(e.data)},null,8,["onClick"])])])),_:1})])),_:1},8,["filters","value"])])),_:1}),(0,t.Wm)(s,{visible:h.value,"onUpdate:visible":a[5]||(a[5]=e=>h.value=e),modal:"",header:g.value.id?"Editar":"Nuevo",style:{width:"50vw"}},{footer:(0,t.w5)((()=>[(0,t.Wm)(l,{label:"Cancelar",icon:"pi pi-times",onClick:a[4]||(a[4]=e=>h.value=!1),text:""}),(0,t.Wm)(l,{label:"Guardar",icon:"pi pi-check",onClick:x})])),default:(0,t.w5)((()=>[(0,t._)("div",v,[p,(0,t.Wm)(r,{type:"text",modelValue:g.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value.name=e),class:"w-full"},null,8,["modelValue"])]),(0,t._)("div",f,[y,(0,t.Wm)(r,{type:"text",modelValue:g.value.short_name,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value.short_name=e),class:"w-full"},null,8,["modelValue"])])])),_:1},8,["visible","header"])],64)}}};const h=b;var w=h}}]);
//# sourceMappingURL=230.a4449369.js.map